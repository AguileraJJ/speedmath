{% extends 'base.html.twig' %}

{% block body %}
<h1>Multiply</h1>
    <div class="game-container">
        <h1>Multiplication Game</h1>
        <p>What is <strong>{{ number1 }}</strong> x <strong>{{ number2 }}</strong>?</p>

        <form id="gameForm">
            <input type="number" id="answer" name="answer" placeholder="Your answer" required>
            <button type="submit">Submit</button>
        </form>

        <p id="response"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('gameForm');
            const answerInput = document.getElementById('answer');
            const responseParagraph = document.getElementById('response');

            form.addEventListener('submit', function (event) {
                event.preventDefault();

                const userAnswer = answerInput.value;
                const number1 = {{ number1 }}; // Injected via Twig
                const number2 = {{ number2 }}; // Injected via Twig

                // Send the answer via AJAX to the Symfony backend
                fetch('{{ path('check_answer') }}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: new URLSearchParams({
                        answer: userAnswer,
                        number1: number1,
                        number2: number2
                    })
                })
                    .then(response => response.text())
                    .then(data => {
                        responseParagraph.textContent = data; // Show response from backend
                        answerInput.value = ''; // Clear the input field
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            });
        });

    </script>

{% endblock %}